#include "heart.h"
#include "contrl.h"


//lynette, you are so pritty
//you are my star
void blew_heart(int tv) {
  unsigned char heart[2][8][8] = {
    {
      {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
      {0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x00},
      {0x00,0x00,0x18,0x3c,0x18,0x00,0x00,0x00},
      {0x00,0x00,0x18,0x3c,0x18,0x00,0x00,0x00},
      {0x00,0x3c,0x7e,0x3c,0x18,0x00,0x00,0x00},
      {0x00,0x00,0x18,0x7e,0x18,0x00,0x00,0x00},
      {0x00,0x00,0x00,0x24,0x00,0x00,0x00,0x00},
      {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
    },
    {
      {0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00},
      {0x00,0x00,0x00,0x3c,0x3c,0x00,0x00,0x00},
      {0x00,0x00,0x18,0x7e,0x7e,0x18,0x00,0x00},
      {0x00,0x00,0x3c,0x7e,0x7e,0x3c,0x00,0x00},
      {0x00,0x18,0x7e,0xff,0xff,0x7e,0x18,0x00},
      {0x00,0x00,0x7e,0xff,0xff,0x7e,0x00,0x00},
      {0x00,0x00,0x00,0x66,0x66,0x00,0x00,0x00},
      {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
    }
  };

  unsigned int x,y,z;
  int times = tv;
  for(z = 0; z <7; z++) {
    while(times--) {
      for(y = 0; y < 8; y++) {
        for(x = 0; x < 8; x++) {
            hc595(heart[0][7-y][7-x]);
        }
        hc595out();
        cen_on(y);
        usleep(200);
        cen_on(8);
        usleep(100);
      }  
    }
    times = tv;
    while(times--) {
      for(y = 0; y < 8; y++) {
        for(x = 0; x < 8; x++) {
            hc595(heart[1][7-y][7-x]);
        }
        hc595out();
        cen_on(y);
        usleep(200);
        cen_on(8);
        usleep(100);
      }  
    }
    times = tv;
  }

}

void _my_heart(int tv)
{
  unsigned char heart[8][8] = {
    {0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x3c,0x3c,0x00,0x00,0x00},
    {0x00,0x00,0x18,0x7e,0x7e,0x18,0x00,0x00},
    {0x00,0x00,0x3c,0x7e,0x7e,0x3c,0x00,0x00},
    {0x00,0x18,0x7e,0xff,0xff,0x7e,0x18,0x00},
    {0x00,0x00,0x7e,0xff,0xff,0x7e,0x00,0x00},
    {0x00,0x00,0x00,0x66,0x66,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
  };

  unsigned int x,y,z;
  int times = tv;
  for(z = 0; z <= 8; z++) {
    while(times--) {
      for(y = 0; y < 8; y++) {
        for(x = 0; x < 8; x++) {
          hc595(heart[7-y][7-x]);
        }
        hc595out();
        cen_on(y);
        usleep(800 - 100*z);
        cen_on(8);
        usleep(100 + 100*z);
      }
    }
    times = tv;
  }
}

void _heartbeat(int tv)
{
  unsigned char heart[8][8] = {
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x66,0x66,0x00,0x00,0x00},
    {0x00,0x00,0x7e,0xff,0xff,0x7e,0x00,0x00},
    {0x00,0x18,0x7e,0xff,0xff,0x7e,0x18,0x00},
    {0x00,0x00,0x3c,0x7e,0x7e,0x3c,0x00,0x00},
    {0x00,0x00,0x18,0x7e,0x7e,0x18,0x00,0x00},
    {0x00,0x00,0x00,0x3c,0x3c,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00}
  };

  unsigned int x,y,z;
  int times = tv;
  for(z = 0; z < 4; z++) {
    while(times--) {
      for(y = 0; y < 8; y++) {
        for(x = 0; x < 8; x++) {
          if(z%2 == 1) {
            if(x<7)
              hc595(heart[y][x+1]);
            else hc595(0);
          } else {
            hc595(heart[y][x]);
          }
        }
        hc595out();
        cen_on(y);
        usleep(200);
        cen_on(8);
        usleep(100);
      }
    }
    times = tv;
  }
}

void _fail_heart(int tv)
{
  unsigned char heart[8][8] = {
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x66,0x66,0x00,0x00,0x00},
    {0x00,0x00,0x7e,0xff,0xff,0x7e,0x00,0x00},
    {0x00,0x18,0x7e,0xff,0xff,0x7e,0x18,0x00},
    {0x00,0x00,0x3c,0x7e,0x7e,0x3c,0x00,0x00},
    {0x00,0x00,0x18,0x7e,0x7e,0x18,0x00,0x00},
    {0x00,0x00,0x00,0x3c,0x3c,0x00,0x00,0x00},
    {0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00}
  };

  unsigned int x,y,z;
  int times = tv;
  for(z = 0; z < 8; z++) {
    while(times--) {
      for(y = 0; y < 8; y++) {
        for(x = 0; x < 8; x++) {
            if(y > z)
              hc595(heart[y-z][x]);
            else hc595(0);
        }
        hc595out();
        cen_on(y);
        //usleep(200);
        cen_on(8);
        usleep(200);
      }
    }
    times = tv;
  }
}
